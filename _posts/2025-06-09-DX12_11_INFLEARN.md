---
title: DirecX12 | Lecture 14. Component (ì¸í”„ëŸ°)
date: 2025-06-09 19:05:23 +0900
categories: [Study, Study\DirectX]
tags: [DX12, C++, ê°•ì˜ì •ë¦¬, inflearn, Rookiss]
author: "rniman"                            # for single entry
# or
# authors: [<author1_id>, <author2_id>]   # for multiple entries
description: "DirectX12 ê°•ì˜ 14. Componentë¥¼ ì •ë¦¬í•œ ê¸€ì…ë‹ˆë‹¤."

comments: false # ëŒ“ê¸€ ê¸°ëŠ¥
---

## ê°•ì˜ ì •ë³´ ğŸ“

- ê°•ì˜ëª…: [C++ê³¼ ì–¸ë¦¬ì–¼ë¡œ ë§Œë“œëŠ” MMORPG ê²Œì„ ê°œë°œ ì‹œë¦¬ì¦ˆ - Part2: ê²Œì„ ìˆ˜í•™ê³¼ DirectX12](https://www.inflearn.com/course/%EC%96%B8%EB%A6%AC%EC%96%BC-3d-mmorpg-2)
- í”Œë«í¼: ì¸í”„ëŸ°
- í˜„ì¬ ì„¹ì…˜: Lecture 14 â€“ Component
- ì£¼ìš” ë‚´ìš©: Component ê¸°ë°˜ì˜ ì—”ì§„ ê°œë°œì„ ìœ„í•œ ë°‘ì‘ì—…ì„ ìˆ˜í–‰í•˜ì˜€ë‹¤.

---

ê²Œì„ ì˜¤ë¸Œì íŠ¸ êµ¬ì¡°ë¥¼ **ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜(Component-based)** ìœ¼ë¡œ êµ¬ì„±í•˜ì—¬ ìœ ì—°í•œ ì„¤ê³„ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.

(ìœ ë‹ˆí‹°ì²˜ëŸ¼ â†’ ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ / ì–¸ë¦¬ì–¼ì€ ìƒì† ê¸°ë°˜ + ì»´í¬ë„ŒíŠ¸)

---

### 1. GameObject, Component êµ¬ì¡° ì„¤ê³„

ìƒì„±ëœ í´ë˜ìŠ¤:

- `Component`
- `GameObject`
- `MeshRenderer`
- `Transform`
- `MonoBehaviour`

---

### 2. Component í´ë˜ìŠ¤

- enum class ComponentType ì •ì˜, `MonoBehaviour`ë¥¼ ë§ˆì§€ë§‰ìœ¼ë¡œ ì •ì˜ í•´ì¤€ë‹¤.
- ì£¼ìš” ë©¤ë²„ í•¨ìˆ˜:
    
    ```cpp
    public:
    	virtual void Awake() {}
    	virtual void Start() {}
    	virtual void Update() {}
    	virtual void LateUpdate() {}
    	
    private:
    	// GameObjectë§Œ ì´ í•¨ìˆ˜ë¥¼ ì ‘ê·¼í•˜ë„ë¡
    	friend class GameObject;
    	void SetGameObject(std::shared_ptr<GameObject> gameObject) { mGameObject = gameObject; }
    
    ```
    
- ì£¼ìš” ë©¤ë²„ ë³€ìˆ˜:
    
    ```cpp
    protected:
    	COMPONENT_TYPE mType;
    	std::weak_ptr<GameObject> mGameObject;
    ```
    

---

### 3. GameObject í´ë˜ìŠ¤

- ìƒì† (ìŠ¤ë§ˆíŠ¸ í¬ì¸í„° ì „ë‹¬ì— í•„ìš”)
    
    ```cpp
    class GameObject : public std::enable_shared_from_this<GameObject>
    ```
    
- ì£¼ìš” ë©¤ë²„ í•¨ìˆ˜:
    
    ```cpp
    public:
    	void Init();
    	void Awake();
    	void Start();
    	void Update();
    	void LateUpdate();
    
    	void AddComponent(std::shared_ptr<Component> component);	// ì»´í¬ë„ŒíŠ¸ë¥¼ ì¶”ê°€
    ```
    
- ì£¼ìš” ë©¤ë²„ ë³€ìˆ˜:
    
    ```cpp
    private:
    	std::array<std::shared_ptr<Component>, FIXED_COMPONENT_COUNT> mComponents;
    	std::vector<std::shared_ptr<MonoBehaviour>> mScripts;
    ```
    

---

### 4. MonoBehaviour & Transform

- `Component` ìƒì†
- ê¸°ë³¸ì ì¸ ìƒì„±ì/ì†Œë©¸ì êµ¬í˜„

---

### 5. MeshRenderer

- `Component` ìƒì†
- `Mesh` ì™€ `Material` í´ë˜ìŠ¤ ê´€ë¦¬
- ì£¼ìš” ë©¤ë²„ í•¨ìˆ˜:
    
    ```cpp
    	virtual void Update() override { Render(); }
    	void Render()
    	{
    		// GetTransform()->Update();
    		mMaterial->Update();
    		mMesh->Render();
    	}
    ```
    
- ì£¼ìš” ë©¤ë²„ ë³€ìˆ˜:
    
    ```cpp
    	std::shared_ptr<Mesh> mMesh;
    	std::shared_ptr<Material> mMaterial;
    ```
    

---

### 6. Mesh ìˆ˜ì •

- `Material`, `Transform` ë©¤ë²„ ë³€ìˆ˜ ì‚­ì œ (Componentì—ì„œ ë°›ë„ë¡ ë³€ê²½)
- `Render()` ì‹œ Material/Transform ê´€ë ¨ í˜¸ì¶œë¥¼ ì œê±°í•œë‹¤.

---

### 7. Game.cpp ë³€ê²½

- ì „ì—­ `GameObject`ë¥¼ ì¶”ê°€í•œë‹¤.
- `Mesh` ì´ˆê¸°í™” â†’ `GameObject::Init()` ë‚´ë¶€ë¡œ ì´ë™
- init í•¨ìˆ˜ ë‚´ë¶€:
    
    ```cpp
    	//... ë²„í…ìŠ¤, ì¸ë±ìŠ¤ ì„¤ì • ë“±
    	
    	gameObject->Init();	// Transform ì¶”ê°€
    
    	std::shared_ptr<MeshRenderer> meshRenderer = std::make_shared<MeshRenderer>();
    	{
    		std::shared_ptr<Mesh> mesh = std::make_shared<Mesh>();
    		mesh->Init(device, commandQueueLayer, vertices, indexes);
    		meshRenderer->SetMesh(mesh);
    	}
    
    	{
    		std::shared_ptr<Shader> shader = std::make_shared<Shader>();
    		std::shared_ptr<Texture> texture = std::make_shared<Texture>();
    		shader->Init(device, rootSignature, depthStencilBuffer->GetDSVFormat(), L"..\\Resources\\Shader\\default.hlsli");
    		texture->Init(device, commandQueueLayer, L"..\\Resources\\Texture\\avatar.png");
    		std::shared_ptr<Material> material = std::make_shared<Material>();
    		material->SetShader(shader);
    		material->SetFloat(0, 0.3f);
    		material->SetFloat(1, 0.4f);
    		material->SetFloat(2, 0.3f);
    		material->SetTexture(0, texture);
    		meshRenderer->SetMaterial(material);
    	}
    
    	gameObject->AddComponent(meshRenderer);
    
    	commandQueueLayer->WaitForGpuComplete();
    };
    ```
    
- Game Update() ë‚´ë¶€
    
    ```cpp
    void Game::Update()
    {
    	Engine::GetInstance().Update();
    	Engine::GetInstance().RenderBegin();
    	
    	gameObject->Update();
    
    	Engine::GetInstance().RenderEnd();
    }
    ```
    

---

### í˜„ì¬ ë¬¸ì œ & í•´ê²°

ë¬¸ì œ

- MeshRendererì—ì„œ Render ì‹œ `device` ë“± ì¸ìë“¤ì´ í•„ìš”í•˜ë‹¤.
- Component Update() ì—ì„œë„ ë™ì¼ ì¸ì í•„ìš” â†’ GameObject Update ìˆ˜ì • í•„ìš”
- êµ¬ì¡°ìƒ ë¶ˆí•„ìš”í•œ ìˆ˜ì •ì´ ìš°ë ¤ëœë‹¤.

í•´ê²°

> GameObjectì— Update() ì™€ Render() ë¥¼ ë¶„ë¦¬í•˜ì—¬ í•´ê²°í•˜ì˜€ë‹¤.
> 
> 
> â†’ ComponentëŠ” í•„ìš” ì‹œ Render() ë¥¼ ì˜¤ë²„ë¼ì´ë“œí•´ì„œ ì‚¬ìš©í•œë‹¤.
> 

---

### ìš”ì•½

| í•­ëª©                | ì„¤ëª…                              |
| ------------------- | --------------------------------- |
| Component ê¸°ë°˜ êµ¬ì¡° | GameObject + Component            |
| GameObject ì—­í•      | Component ì¶”ê°€/Update/Render ê´€ë¦¬ |
| MeshRenderer ì—­í•    | Mesh + Material ë¬¶ì–´ì„œ ë Œë”ë§     |
| Mesh êµ¬ì¡° ë³€ê²½      | Material/Transform ì œê±°           |
| Game íë¦„ ë³€ê²½      | GameObject ì¤‘ì‹¬ìœ¼ë¡œ ê´€ë¦¬          |
| Render êµ¬ì¡°         | GameObjectì—ì„œ Update/Render ë¶„ë¦¬ |

---

## ëŠë‚€ì  ğŸ“

> ëŠë‚€ì  ğŸ’¡
> ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ì˜ êµ¬ì¡°ë¥¼ êµ¬í˜„í•´ë³´ê³  ì‹¶ì—ˆëŠ”ë° ë§ˆì¹¨ ê°•ì˜ì—ì„œ ë¹„ìŠ·í•œ í˜•íƒœë¡œ êµ¬í˜„í•˜ê²Œ ë˜ì–´ì„œ ë§¤ìš° ì¢‹ì•˜ë‹¤.
> ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë‚˜ë§Œì˜ ë¯¸ë‹ˆ ì—”ì§„ì„ êµ¬í˜„í•´ë³´ê³ ì‹¶ë‹¤ëŠ” ìš•êµ¬ê°€ ë“ ë‹¤.
