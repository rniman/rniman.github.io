---
title: DirecX12 | Lecture 6. ì‚¼ê°í˜• ë„ìš°ê¸° (ì¸í”„ëŸ°)
date: 2025-05-20 11:10:23 +0900
categories: [Study, Study\DirectX]
tags: [DX12, C++, ê°•ì˜ì •ë¦¬, inflearn, Rookiss]
author: "rniman"                            # for single entry
# or
# authors: [<author1_id>, <author2_id>]   # for multiple entries
description: "DirectX12 ê°•ì˜ 6. ì‚¼ê°í˜• ë„ìš°ê¸°ë¥¼ ì •ë¦¬í•œ ê¸€ì…ë‹ˆë‹¤."

comments: false # ëŒ“ê¸€ ê¸°ëŠ¥
---

## ê°•ì˜ ì •ë³´ ğŸ“

- ê°•ì˜ëª…: [C++ê³¼ ì–¸ë¦¬ì–¼ë¡œ ë§Œë“œëŠ” MMORPG ê²Œì„ ê°œë°œ ì‹œë¦¬ì¦ˆ - Part2: ê²Œì„ ìˆ˜í•™ê³¼ DirectX12](https://www.inflearn.com/course/%EC%96%B8%EB%A6%AC%EC%96%BC-3d-mmorpg-2)
- í”Œë«í¼: ì¸í”„ëŸ°
- í˜„ì¬ ì„¹ì…˜: Lecture 6 â€“ ì‚¼ê°í˜• ë„ìš°ê¸°
- ì£¼ìš” ë‚´ìš©: DirectX 12ë¥¼ í™œìš©í•´ì„œ í™”ë©´ì— ì‚¼ê°í˜•ì„ ê·¸ë ¸ë‹¤.

---

### 1. DescriptorHeap â†’ SwapChainìœ¼ë¡œ ì´ì „

- **ì´ìœ **: RTVëŠ” í”„ë ˆì„ ë²„í¼ì™€ ë°€ì ‘í•œ ê´€ê³„ â†’ **SwapChain ë‚´ë¶€ì—ì„œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì ì ˆ**í•˜ë‹¤
- ë³€ê²½ì‚¬í•­:
    - `DescriptorHeap`ì˜ `Init()`ì„ `SwapChain::CreateRtv()`ë¡œ í†µí•©
    - `rtvHeapSize` ì œê±° (í•„ìš”ì‹œ í•¨ìˆ˜ í˜¸ì¶œë¡œ ëŒ€ì²´)
    - `CreateSwapChain()` â†’ ì„¸ë¶„í™” ë° `CreateRtv()` í˜¸ì¶œ í¬í•¨
    - `DescriptorHeap` íŒŒì¼ ì™„ì „ ì‚­ì œ â†’ **ë””ë²„ê¹… ê³¼ì • í•„ìš”**

- **ìº¡ìŠí™”(encapsulation)**
    
    > â€œí•„ìš”í•œ ê²ƒë§Œ ë³´ì—¬ì£¼ê³ , ë‚˜ë¨¸ì§€ëŠ” ìˆ¨ê²¨ë¼â€
    > 
    - private: ë‚´ë¶€ ë©¤ë²„í•¨ìˆ˜ â†’ ìº¡ìŠí™”
    - ì™¸ë¶€ì—ì„œ í˜¸ì¶œí•˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ë“¤ì— ëŒ€í•œ ìº¡ìŠí™”ê°€ ì´ë£¨ì–´ ì¡Œë‹¤.

| ëª©ì                        | ì„¤ëª…                                                    |
| -------------------------- | ------------------------------------------------------- |
| **ì™¸ë¶€ ì¸í„°í˜ì´ìŠ¤ ë‹¨ìˆœí™”** | í´ë˜ìŠ¤ê°€ ì œê³µí•˜ëŠ” public APIê°€ ì ê³  ëª…í™•í•´ì§            |
| **ì˜¤ìš© ë°©ì§€**              | ì™¸ë¶€ì—ì„œ ì˜ëª»ëœ ìˆœì„œ/ìƒíƒœë¡œ ë‚´ë¶€ í•¨ìˆ˜ í˜¸ì¶œí•˜ëŠ” ê±¸ ë§‰ìŒ  |
| **ìœ ì§€ë³´ìˆ˜ ìš©ì´**          | ë‚´ë¶€ êµ¬í˜„ì„ ë°”ê¿”ë„ public APIë§Œ ìœ ì§€í•˜ë©´ ì™¸ë¶€ ì˜í–¥ ì—†ìŒ |
| **í…ŒìŠ¤íŠ¸ ì•ˆì •ì„±**          | public í•¨ìˆ˜ë§Œ í…ŒìŠ¤íŠ¸ ëŒ€ìƒì´ë©´ í…ŒìŠ¤íŠ¸ ë²”ìœ„ë„ ì¢ê³  ëª…í™•   |

---

### 2. ì „ì—­ ì ‘ê·¼ êµ¬ì¡° ì„¤ê³„ ê°œì„ 

- `Engine`ì—ì„œ `Device`, `CommandQueue`, `SwapChain` ì ‘ê·¼ ê°€ëŠ¥í•˜ê²Œ Getter ì‘ì„±
- **ë§¤í¬ë¡œ ì ‘ê·¼ ì œê±°**
    
    ```cpp
    // ì œê±° ëŒ€ìƒ
    #define DEVICE gEngine::GetInstance().GetDevice()->GetDevice()
    
    // ë‹¤ìŒìœ¼ë¡œ ë°”ê¾¸ì—ˆë‹¤.
    gEngine::GetInstance().GetDeviceLayer()->GetDevice();
    ```
    
    - `inline í•¨ìˆ˜ + namespace` êµ¬ì¡°ë¡œ ëŒ€ì²´í•˜ë ¤ í–ˆì§€ë§Œ í—¤ë” ì˜ì¡´ì„±ì´ ìƒê¸¸ ìˆ˜ ìˆë‹¤.
    - ì²´ì´ë‹ì„ ìœ ì§€í•˜ë˜ ì´ë¦„ì„ ëª…í™•í•˜ê²Œ í•˜ê¸°ë¡œ ê²°ì •(ì˜ˆ: `DeviceLayer` ë“±)
- **í—¤ë” ì˜ì¡´ì„± ìµœì†Œí™”**
    - ìˆ˜ì—…ì—ì„œëŠ” Egine.hì— Device, CommandQueue, SwapChain ë“±ì„ ë¯¸ë¦¬ ì¸í´ë£¨ë“œí•˜ì˜€ë‹¤.
    - `Engine.h`ì—ì„œ í•˜ìœ„ ëª¨ë“ˆì„ ì§ì ‘ include âŒ
    - â†’ **ì „ë°©ì„ ì–¸ + í•„ìš” ì‹œ ì§ì ‘ include ê¶Œì¥**

---

### 3. Root Signature ìƒì„±

- ê¸°ë³¸ì ì¸ ë£¨íŠ¸ ì‹œê·¸ë‹ˆì²˜ ìƒì„± ë¡œì§ êµ¬í˜„
- ì„¸ë¶€ Slot êµ¬ì„± ë“± ì„¸ë¶€ ë‚´ìš©ì€ ì´í›„ ê°•ì˜ì—ì„œ ë‹¤ë£¬ë‹¤.

---

### 4. Mesh í´ë˜ìŠ¤ êµ¬ì„±

- **íŒŒì¼ ìƒì„±**: `Mesh.h`, `Mesh.cpp`
- **ë©¤ë²„ êµ¬ì„±**:
    - Vertex Buffer, Vertex Buffer View, Vertex Count
- **ë²„í…ìŠ¤ êµ¬ì¡°ì²´ ì •ì˜**:
    - `EnginePch.h`ì— ì •ì˜ â†’ `float3 pos`, `float4 color`
- **ë©”ëª¨ë¦¬ í™ ê´€ë ¨**
    - `UPLOAD_HEAP`ìœ¼ë¡œ ìƒì„±
        - GPU ì „ì†¡ í›„ `DEFAULT_HEAP`ì— ë³µì‚¬í•˜ì—¬ ê´€ë¦¬ í•  ìˆ˜ ìˆë‹¤.
        - ì •ì ì¸ ë°ì´í„°ëŠ” `DEFAULT_HEAP` ê¶Œì¥

---

### 5. Shader í´ë˜ìŠ¤ êµ¬ì„±

- **íŒŒì¼ ìƒì„±**: `Shader.h`, `Shader.cpp`
- **ì±…ì„**
    - Shader Blob ê´€ë¦¬
    - RootSignature ë° PSO ê´€ë¦¬
- **ì…°ì´ë” ëª¨ë¸**:  ìˆ˜ì—…ì—ì„œëŠ”  `vs_5_0`, `ps_5_0` ì„ ì‚¬ìš©í–ˆì§€ë§Œ ìˆ˜ì •í•˜ì—¬ `vs_5_1`, `ps_5_1` ìœ¼ë¡œ ì‚¬ìš©í•˜ê² ë‹¤.

---

### 6. HLSL ë° HLSLi

- **Default HLSL** íŒŒì¼ ìƒì„±
- **HLSLi**: include ì „ìš© HLSL íŒŒì¼ (ìƒìˆ˜, êµ¬ì¡°ì²´, ê³µìš© í•¨ìˆ˜ ë“±)

---

### 7. Client í”„ë¡œì íŠ¸ - Game êµ¬ì„±

- `Game::Init()`ì—ì„œ Meshì™€ Shader ì´ˆê¸°í™”
    - ì „ë°© ì„ ì–¸ìœ¼ë¡œ ì˜ì¡´ì„±ì„ ìµœì†Œí™”í•˜ì˜€ë‹¤.
    - ì •ì  ì •ë³´ë¥¼ ë§Œë“ ë‹¤.
- `Game::Update()`ì—ì„œ í˜¸ì¶œ íë¦„:
    
    ```cpp
    void Game::Update() 
    {
        Engine::GetInstance().RenderBegin();
        shader->Update();
        mesh->Render();
        Engine::GetInstance().RenderEnd();
    }
    ```
    
---

### ì°¸ê³ 

| ê°œë…            | ì„¤ëª…                                      |
| --------------- | ----------------------------------------- |
| **ë¦¬ì†ŒìŠ¤ ìƒì„±** | `HeapType`ì— ë”°ë¼ Upload/Default ì§€ì •     |
| **ë·°(View)**    | GPUê°€ ë¦¬ì†ŒìŠ¤ë¥¼ ì ‘ê·¼í•˜ê¸° ìœ„í•œ ë·° ìƒì„± í•„ìš” |
| **RTV**         | Render Target View â€“ ì¶œë ¥ íƒ€ê²Ÿ ë²„í¼ ë·°    |

## ìš”ì•½ ë° ëŠë‚€ì  ğŸ“

- ì‚¼ê°í˜•ì„ ê·¸ë¦¬ê¸° ìœ„í•´ RootSignature, Mesh, Shaderë“¤ì„ ë§Œë“¤ì—ˆë‹¤.
- HLSLië¥¼ í†µí•´ì„œ ì…°ì´ë” ì½”ë“œë¥¼ ê±´ë“¤ì˜€ë‹¤.
> ëŠë‚€ì  ğŸ’¡
> ë‚˜ë§Œì˜ ì»¨ë²¤ì…˜ì— ë§ì¶°ì„œ êµ¬ì¡°ë¥¼ ì¡°ê¸ˆì”© ë°”ê¾¸ë‹¤ ë³´ë‹ˆ ê³ ë¯¼ì´ ìƒë‹¹íˆ ë§ì•„ì§„ë‹¤.
> ì˜ˆë¥¼ ë“¤ì–´ ìˆ˜ì—…ì—ì„œëŠ” ë§¤í¬ë¡œë¥¼ ì‚¬ìš©í•˜ì—¬ ê¸´ ì²´ì´ë‹ì„ ì¤„ì—¬ì„œ ì‚¬ìš©í•˜ì˜€ëŠ”ë° 
> ë§¤í¬ë¡œ ì´ì™¸ì˜ ë°©ì‹ìœ¼ë¡œ í•´ê²°í•˜ë ¤ë‹¤ ë³´ë‹ˆ ì¡°ê¸ˆì”© ë¬¸ì œê°€ ìˆì„ ìˆ˜ ë°–ì— ì—†ì—ˆë‹¤.
> ì´ëŸ° ë¦¬í™í† ë§ì— ì‹œê°„ì„ ì¢€ ì“°ê³ ìˆëŠ”ë° ì˜ë¯¸ê°€ ìˆëŠ” ì¼ì´ì—ˆìœ¼ë©´ ì¢‹ê² ë‹¤.

## í”„ë¡œì íŠ¸ ìƒíƒœ ğŸ’¾

![< ì‹¤í–‰ ì‹œ ë‹¤ìŒê³¼ ê°™ì€ ì‚¼ê°í˜•ì´ ê·¸ë ¤ì§„ë‹¤ >](assets/img/DX12/01_INFLEARN/03Triangle.png)

< ì‹¤í–‰ ì‹œ ë‹¤ìŒê³¼ ê°™ì€ ì‚¼ê°í˜•ì´ ê·¸ë ¤ì§„ë‹¤ >
