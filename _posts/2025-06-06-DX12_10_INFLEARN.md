---
title: DirecX12 | Lecture 13. Material (ì¸í”„ëŸ°)
date: 2025-06-06 22:24:23 +0900
categories: [Study, Study\DirectX]
tags: [DX12, C++, ê°•ì˜ì •ë¦¬, inflearn, Rookiss]
author: "rniman"                            # for single entry
# or
# authors: [<author1_id>, <author2_id>]   # for multiple entries
description: "DirectX12 ê°•ì˜ 13. Materialë¥¼ ì •ë¦¬í•œ ê¸€ì…ë‹ˆë‹¤."

comments: false # ëŒ“ê¸€ ê¸°ëŠ¥
---

## ê°•ì˜ ì •ë³´ ğŸ“

- ê°•ì˜ëª…: [C++ê³¼ ì–¸ë¦¬ì–¼ë¡œ ë§Œë“œëŠ” MMORPG ê²Œì„ ê°œë°œ ì‹œë¦¬ì¦ˆ - Part2: ê²Œì„ ìˆ˜í•™ê³¼ DirectX12](https://www.inflearn.com/course/%EC%96%B8%EB%A6%AC%EC%96%BC-3d-mmorpg-2)
- í”Œë«í¼: ì¸í”„ëŸ°
- í˜„ì¬ ì„¹ì…˜: Lecture 13 â€“ Material
- ì£¼ìš” ë‚´ìš©: Material í´ë˜ìŠ¤ë¥¼ ìƒì„±í•˜ì—¬ Texture, Shaderë¥¼ ê´€ë¦¬í•˜ê³  Meshì™€ ì—°ê²°í•˜ëŠ” ë“±ì˜ ì‘ì—…ì„ í•˜ì˜€ë‹¤.

---

shader, mesh, textureì™€ ê°™ì€ resourceëŠ” ëª¨ë“  ë™ì¼í•œ ì˜¤ë¸Œì íŠ¸ë¼ë¦¬ ê³µìœ ê°€ ê°€ëŠ¥ í•  ìˆ˜ ìˆë‹¤.
Materialì€ shader, texture ë“±ì„ í•˜ë‚˜ë¡œ ë¬¶ì–´ì„œ ê´€ë¦¬í•œë‹¤.

---

### 1. Input í´ë˜ìŠ¤ ê°œì„ 

- `Input::Update()`ì—ì„œ `GetKeyboardState()` ì‚¬ìš©:

```cpp
BYTE asciiKeys[KEY_TYPE_COUNT] = {};
if (::GetKeyboardState(asciiKeys) == false) {
    return;
}
```

---

### 2. ConstantBuffer ê°œì„ 

- `ConstantBufferType` Enum classë¥¼ ì‘ì„±í•œë‹¤.
- `CbvRegisterNumber` ë©¤ë²„ ë³€ìˆ˜ ì¶”ê°€ â†’ `PushData` ì´í›„ `SetCBV()`ê¹Œì§€ **í•˜ë‚˜ì˜ ì‘ì—…ìœ¼ë¡œ í†µí•©**í•œë‹¤.
- ë¦¬í„´ íƒ€ì…ì„ `void`ë¡œ ë³€ê²½í•œë‹¤.

ëª©ì 

- **ë ˆì§€ìŠ¤í„° ë²ˆí˜¸ ì‹¤ìˆ˜ ë°©ì§€**
- ì‚¬ìš© ì‹œ ëª…í™•í•œ ì˜ë¯¸ ì „ë‹¬

---

### 3. Engineì—ì„œ ConstantBuffer ì—¬ëŸ¬ ê°œ ê´€ë¦¬

- ê¸°ì¡´ 1ê°œ â†’ `std::vector<std::shared_ptr<ConstantBuffer>>` ì‚¬ìš©í•œë‹¤.
- Initì—ì„œ ê¸°ì¡´ ConstantBuffer ì´ˆê¸°í™” ì½”ë“œ ì œê±°í•œë‹¤.
- ëŒ€ì‹  `CreateConstantBuffer()` í•¨ìˆ˜ë¥¼ ë„ì…í•œë‹¤.

```cpp
CreateConstantBuffer(CbvRegisterNumber::b0, sizeof(Transform), 256);
CreateConstantBuffer(CbvRegisterNumber::b1, sizeof(MaterialParams), 256);
```

---

### 4. Material í´ë˜ìŠ¤ ìƒì„±

`MaterialParams` êµ¬ì¡°ì²´

```cpp
struct MaterialParams {
    void SetInt(uint8 index, int32 value) { intParams[index] = value; }
    void SetFloat(uint8 index, float value) { floatParams[index] = value; }
    std::array<int32, MATERIAL_INT_COUNT> intParams;
    std::array<float, MATERIAL_FLOAT_COUNT> floatParams;
};
```

Material í´ë˜ìŠ¤

- Shader, MaterialParams, Texture ë°°ì—´ì„ ë©¤ë²„ ë³€ìˆ˜ë¡œ ê°€ì§„ë‹¤.
- **Update()** í•¨ìˆ˜:
    - `PushData()`,`SetSRV()`,Shaderì˜ `Update()` ë¥¼ í˜¸ì¶œí•œë‹¤.

---

### 5. Default.hlsli ìˆ˜ì •

- `cbuffer Material_Params` ì¶”ê°€í•œë‹¤.
- `Texture2D tex_0 ~ tex_4` ì¶”ê°€í•œë‹¤.

---

### 6. CommandList â†’ RenderBegin ìˆ˜ì •

```cpp
constantBuffers[static_cast<uint8>(ConstantBufferType::TRANSFORM)]->Clear();
constantBuffers[static_cast<uint8>(ConstantBufferType::MATERIAL)]->Clear();
```

---

### 7. Mesh â†’ Render ìˆ˜ì •

```cpp
constantBuffers[static_cast<uint8>(ConstantBufferType::TRANSFORM)]->PushData(&mTransform, sizeof(Transform));

mMaterial->Update(device, commandList, tableDescriptorHeap,
    constantBuffers[static_cast<uint8>(ConstantBufferType::TRANSFORM)]);
```

- ê¸°ì¡´ `SetSRV()` í˜¸ì¶œì„ ì œê±°í•œë‹¤.
- Texture ê´€ë ¨ ì½”ë“œë¥¼ ì‚­ì œí•˜ê³ , Material ë©¤ë²„ë¥¼ ì¶”ê°€í•œë‹¤.

---

### 8. Shader ì½”ë“œ í…ŒìŠ¤íŠ¸

- Shader ì½”ë“œì—ì„œ `float_0 ~ float_2` ë¥¼ positionì— ë”í•´ í…ŒìŠ¤íŠ¸í•œë‹¤.

```cpp
output.pos.x += float_0;
output.pos.y += float_1;
output.pos.z += float_2;
```

---

### 9. Gameì—ì„œ Material ì‚¬ìš©

- ê¸°ì¡´ ì „ì—­ Shader, Texture ì‚¬ìš© â†’ `Init()`ì—ì„œ ì„¤ì •í•œë‹¤.
- Material ìƒì„± í›„:
    - Shader, Texture, Float ê°’ì„ ì„¤ì •
    - Meshì— Materialë¥¼ ì„¤ì •

---

### ìš”ì•½

| í•­ëª©                | ì„¤ëª…                              |
| ------------------- | --------------------------------- |
| Input ê°œì„           | `GetKeyboardState()` ì‚¬ìš©         |
| ConstantBuffer ê°œì„  | Type ë¶„ë¦¬, ë ˆì§€ìŠ¤í„° ìë™ ì²˜ë¦¬     |
| Engine              | ì—¬ëŸ¬ ConstantBuffer ê´€ë¦¬          |
| Material í´ë˜ìŠ¤     | Shader + Texture + Params ê´€ë¦¬    |
| Shader ìˆ˜ì •         | Material_Params ë° Texture2D í™•ì¥ |
| Mesh êµ¬ì¡°           | Material ê¸°ë°˜ êµ¬ì¡°ë¡œ ì „í™˜         |
| Game í™œìš©           | Material êµ¬ì„± í›„ Meshì— ì ìš©      |

---

## ëŠë‚€ì  ğŸ“

> ëŠë‚€ì  ğŸ’¡
> Materialì— ëŒ€í•´ ë‹¤ë£¨ì—ˆëŠ”ë° ì´ì „ì—ëŠ” ì™œ Materialì— Shader, Texture ë“±ì„ ë„£ì–´ ê´€ë¦¬í•´ì•¼ ë˜ëŠ”ì§€ì— ëŒ€í•´ 
> ìì„¸íˆ ì•Œì•„ë³´ì§€ ì•Šì•˜ëŠ”ë° ì´ ê°•ì˜ë¥¼ í†µí•´ ê¹¨ë‹¬ì„ ìˆ˜ ìˆì—ˆë‹¤.
