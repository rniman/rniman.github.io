---
title: DirecX12 | Lecture 5. ì¥ì¹˜ ì´ˆê¸°í™” (ì¸í”„ëŸ°)
date: 2025-05-15 11:25:49 +0900
categories: [Study, DirectX]
tags: [DX12, C++, ê°•ì˜ì •ë¦¬, inflearn, Rookiss]
author: "rniman"                            # for single entry
# or
# authors: [<author1_id>, <author2_id>]   # for multiple entries
description: "DirectX12 ê°•ì˜ 5. ì¥ì¹˜ ì´ˆê¸°í™”ì„ ì •ë¦¬í•œ ê¸€ì…ë‹ˆë‹¤."

comments: false # ëŒ“ê¸€ ê¸°ëŠ¥
---

## ê°•ì˜ ì •ë³´ ğŸ“

- ê°•ì˜ëª…: [C++ê³¼ ì–¸ë¦¬ì–¼ë¡œ ë§Œë“œëŠ” MMORPG ê²Œì„ ê°œë°œ ì‹œë¦¬ì¦ˆ - Part2: ê²Œì„ ìˆ˜í•™ê³¼ DirectX12] (https://www.inflearn.com/course/%EC%96%B8%EB%A6%AC%EC%96%BC-3d-mmorpg-2)
- í”Œë«í¼: ì¸í”„ëŸ°
- í˜„ì¬ ì„¹ì…˜: Lecture 5 â€“ ì¥ì¹˜ ì´ˆê¸°í™”
- ì£¼ìš” ë‚´ìš©: DirectX 12 ë Œë”ë§ íŒŒì´í”„ë¼ì¸ì˜ í•µì‹¬ ìš”ì†Œë“¤ì„ êµ¬í˜„í•˜ê¸° ìœ„í•œ ì´ˆê¸° ì‘ì—… ë‹¨ê³„ë¥¼ ê±°ì³¤ë‹¤.

---

### 1. í”„ë¡œì íŠ¸ êµ¬ì¡° ë° ì„¤ì •

- **Client í”„ë¡œì íŠ¸**
    - ì¶œë ¥ ë””ë ‰í„°ë¦¬: `$(SolutionDir)Output`
- **Engine í”„ë¡œì íŠ¸**
    - ë‹¤ìŒ ì£¼ìš” í´ë˜ìŠ¤ ìƒì„±:
        - `Engine`, `Device`, `SwapChain`, `CommandQueue`, `DescriptorHeap`

---

### 2. ì „ì—­ ê°ì²´ ë° ì´ˆê¸°í™”

- `EnginePch.h`
    - `WindowInfo` êµ¬ì¡°ì²´ ì •ì˜
    - `extern std::unique_ptr<class Engine> gEngine;` ì„ ì–¸
        - â€» ì „ë°© ì„ ì–¸ ë°©ì‹ í™•ì¸ í•„ìš”
            
            â†’ ì „ë°© ì„ ì–¸ì„ í™œìš©í•  ê²ƒìœ¼ë¡œ ê²°ì •
            
- `EnginePch.cpp`
    - `std::unique_ptr<Engine> GEngine;` ì •ì˜
        - â€» ì¶”í›„ ì‹±ê¸€í†¤ íŒ¨í„´ìœ¼ë¡œ ì „í™˜ ì˜ˆì •

```cpp
class Engine
{
public:
	static Engine& GetInstance();
	...

private:
	Engine() {}
	~Engine() {}
	Engine(const Engine&) = delete;	// ë³µì‚¬ ë°©ì§€
	Engine& operator=(const Engine&) = delete; // ë³µì‚¬ ëŒ€ì… ì—°ì‚°ì ê¸ˆì§€

	...
};
```

- `Engine` í´ë˜ìŠ¤
    - `Init()`, `ResizeWindow()` í•¨ìˆ˜ êµ¬í˜„

---

### 3. Device í´ë˜ìŠ¤ ì„¸ë¶€ êµ¬ì„±

- **COM ê°ì²´ ì¶”ê°€**
    - `ID3D12Debug6`, `IDXGIFactory4`, `ID3D12Device` ë“± ì¼ë¶€ ìƒìœ„ ë²„ì „ ì‚¬ìš©
    - `DXGIFactory`ìƒì„± ì‹œ `CreateDXGIFactory2`ë¡œ ë³€ê²½
- **ë””ë°”ì´ìŠ¤ ìƒì„±**
    
    ```cpp
    ::D3D12CreateDevice(nullptr, D3D_FEATURE_LEVEL_12_0, IID_PPV_ARGS(&mDevice));
    ```
    
    - `D3D_FEATURE_LEVEL_12_0`ì„ ì‚¬ìš©í•˜ì—¬ í•˜ë“œì›¨ì–´ ìµœì†Œ ìš”êµ¬ ìˆ˜ì¤€ ì„¤ì •

---

### 4. CommandQueue í´ë˜ìŠ¤

- ì´ˆê¸°í™” ë° ë Œë”ë§ í•¨ìˆ˜ ì‘ì„±
    - `RenderBegin()`, `RenderEnd()` êµ¬í˜„
- **ë ˆí¼ëŸ°ìŠ¤ vs í¬ì¸í„°**
    - `Viewport`, `ScissorRect`ëŠ” í¬ì¸í„° ëŒ€ì‹  ë ˆí¼ëŸ°ìŠ¤ ì „ë‹¬ ë°©ì‹ ê³ ë ¤

---

### 5. SwapChain í´ë˜ìŠ¤

- ìƒìœ„ ë²„ì „ì˜ API ì‚¬ìš©
    - `IDXGIFactory4::CreateSwapChainForHwnd()`ë¡œ ë³€ê²½
    - `IDXGISwapChain3` ì‚¬ìš©
- ì„¤ì • ë° ì£¼ì˜ì 
    - `EnginePch.h`ì— **ìŠ¤ì™‘ ì²´ì¸ ë²„í¼ ê°œìˆ˜ enum** ì •ì˜ â†’ enum ì§€ì–‘ ë° ìƒìˆ˜ë¡œ í‘œí˜„
    - `DXGI_SWAP_CHAIN_DESC1` ì™€ ê°™ì€ êµ¬ì¡°ì²´ **ëª…ì‹œì  ì´ˆê¸°í™” ìŠµê´€** ê°•ì¡°!
    - **MSAA** ë¹„í™œì„±í™” ìƒíƒœ í™•ì¸

---

### 6. DescriptorHeap í´ë˜ìŠ¤

- RTV/DSV/SRV ë“±ì˜ ë¦¬ì†ŒìŠ¤ ë°”ì¸ë”©ì— ì‚¬ìš©ë  í™ ìƒì„±
- ì•„ì§ ê¸°ë³¸ì ì¸ êµ¬ì¡° ì‘ì„± ë‹¨ê³„

---

### 7. Engineì˜ Render í•¨ìˆ˜

- `RenderBegin()`, `RenderEnd()` ë‚´ë¶€ì—ì„œ `CommandQueue` í˜¸ì¶œ
- í˜„ì¬ ë Œë”ë§ ë¡œì§ì˜ ë² ì´ìŠ¤ êµ¬ì„± ë‹¨ê³„

---

### ì°¸ê³ 

- **CD3DX12_RECT**
    - `D3D12_RECT`ë¥¼ ê°ì‹¼ í—¬í¼ êµ¬ì¡°ì²´ (`d3dx12.h`ì— ì •ì˜)
- **COM (Component Object Model)**
    - DirectXê°€ ì‚¬ìš©í•˜ëŠ” ê°ì²´ ì§€í–¥ ì¸í„°í˜ì´ìŠ¤ ëª¨ë¸
    - `ComPtr`ì€ ì´ë¥¼ RAII ë°©ì‹ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ìŠ¤ë§ˆíŠ¸ í¬ì¸í„° (ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€)
- **ComPtrê³¼ ìŠ¤ë§ˆíŠ¸ í¬ì¸í„° ê·œì¹™**
    - `ComPtr`ì€ `const &`ë¡œ ë„˜ê¹€
    - `shared_ptr`ë„ `const std::shared_ptr<T>&` ë°©ì‹ ì‚¬ìš© (ì™¸ë¶€ ì†Œìœ ê¶Œ ìœ ì§€ ì£¼ì˜)

## ìš”ì•½ ë° ëŠë‚€ì  ğŸ“

- Engine í”„ë¡œì íŠ¸ì—ëŠ” Device, CommandQueue, SwapChain, DescriptorHeapê³¼ ê°™ì€ ê¸°ë³¸ APIë“¤ì´ ë§Œë“¤ì–´ì§„ë‹¤.
- ìˆ˜ì—…ì„ ë”°ë¼ê°€ë©´ì„œ í•¨ìˆ˜ ë²„ì ¼ì´ë¼ë˜ì§€ ì‹±ê¸€í†¤ì„ ì ìš©í•˜ëŠ” ë“±ì˜ ë¦¬í™í† ë§ì„ ì¡°ê¸ˆ í•˜ì˜€ë‹¤.
> ëŠë‚€ì  ğŸ’¡
> ì´ì „ì—ëŠ” í•˜ë‚˜ í•˜ë‚˜ì”© ì‹ ê²½ì“°ë©´ì„œ êµ¬í˜„í•˜ì§€ëŠ” ì•Šì•„ì„œ ê·¸ëŸ°ì§€ í•˜ë‚˜ì”© ì‚´í´ë³´ë©´ ì‹ ê²½ì“°ì´ëŠ” ë¶€ë¶„ë“¤ì´
> ê½¤ ìˆì—ˆë‹¤. íŠ¹íˆ ì»¨ë²¤ì…˜ì„ ë§Œë“¤ì–´ì„œ ê·¸ì— ë§ê²Œ ìˆ˜ì •í•˜ëŠ” ê³¼ì •ë„ ì„ì´ë‹¤ë³´ë‹ˆ ì‹œê°„ì„ ê³µë“¤ì¼ í•„ìš”ê°€ 
> ìˆì—ˆë‹¤. ìˆ˜ì •í•˜ëŠ” ê³¼ì •ì—ì„œ êµ¬ì¡°ì²´ë¥¼ ì´ˆê¸°í™”í•˜ì§€ ì•Šì•„ì„œ ì˜¤ë¥˜ê°€ ë‚˜ëŠ” ë¬¸ì œë„ ê²ªì—ˆê³  ì‚¬ì†Œí•œ ê²ƒì—ë„
> ì‹ ê²½ ì“¸ ìˆ˜ ìˆëŠ” ê°œë°œìê°€ ë˜ì–´ì•¼ ê² ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤.
> 

## í”„ë¡œì íŠ¸ ìƒíƒœ ğŸ’¾

![< ì‹¤í–‰ ì‹œ ë‹¤ìŒê³¼ ê°™ì€ ìœˆë„ìš° ì°½ì´ ëœ¬ë‹¤ >](assets/img/DX12/01_INFLEARN/02Result.png)

< ì‹¤í–‰ ì‹œ ë‹¤ìŒê³¼ ê°™ì€ ìœˆë„ìš° ì°½ì´ ëœ¬ë‹¤ >
