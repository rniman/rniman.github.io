---
title: DirecX12 ê°œì¸ ë©”ëª¨ | Shader Model
date: 2025-05-24 00:55:20 +0900
categories: [Rendering, Rendering\DirectX]
tags: [DX12, Shader Model, Shader, Note, Feature Level]
author: "rniman"                            # for single entry
# or
# authors: [<author1_id>, <author2_id>]   # for multiple entries
description: "DirectX12 Shader Modelì— ê´€í•œ ê¸€ì…ë‹ˆë‹¤."

comments: false # ëŒ“ê¸€ ê¸°ëŠ¥
---

ì´ ë¬¸ì„œëŠ” Direct3D 12ì— Shader Model ë²„ì ¼ ê°„ ì°¨ì´ì ê³¼ 6.6ëª¨ë¸ì„ ì ìš©í•˜ëŠ” ê²ƒì— ëŒ€í•´ ì •ë¦¬í•œ ê²ƒì…ë‹ˆë‹¤.

---

## Shader Model 6.6

ë‹¤ìŒ ëª¨ë¸ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ê¸°ì¡´ì˜ `D3DCompileFromFile`ëŒ€ì‹  `IDxcCompiler3`ì˜ `Compile` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

| í•­ëª©         | SM 5.1    | SM 6.6         |
| ------------ | --------- | -------------- |
| ì»´íŒŒì¼ëŸ¬     | `fxc`     | `dxc`          |
| Windows SDK  | ë‚®ì•„ë„ ë¨ | ìµœì‹  í•„ìš”      |
| GPU ë“œë¼ì´ë²„ | ë³´í†µ í˜¸í™˜ | ìµœì‹  í•„ìš”      |
| ë¬¸ë²• í˜¸í™˜ì„±  | ë„“ìŒ      | ìµœì‹  ë¬¸ë²• í¬í•¨ |

| í•­ëª©          | ì„¤ëª…                                                        |
| ------------- | ----------------------------------------------------------- |
| ê¸°ì¡´ ë°©ì‹     | `D3DCompileFromFile` â†’ `FXC`                                |
| ë³€ê²½ ë°©ì‹     | `IDxcCompiler3::Compile` â†’ `DXC`                            |
| íŒŒì¼ ì¸ì½”ë”©   | UTF-8 ê¶Œì¥                                                  |
| í•„ìš” íŒŒì¼     | `dxcapi.h`, `dxcompiler.lib`, `dxcompiler.dll`,  `dxil.dll` |
| Shader Target | `"vs_6_6"`, `"ps_6_6"` ë“± ë¬¸ìì—´ë¡œ ì „ë‹¬                     |

---

### ComlieShaderWithDXC ì½”ë“œ

```cpp
bool Shader::CompileShaderWithDXC(const std::wstring& path, const std::wstring& name, const std::wstring& version, ComPtr<IDxcBlob>& blob, D3D12_SHADER_BYTECODE& shaderByteCode)
{
	ComPtr<IDxcUtils> utils;
	ComPtr<IDxcCompiler3> compiler;
	ComPtr<IDxcIncludeHandler> includeHandler;

	// 1. DXC ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
	if (FAILED(DxcCreateInstance(CLSID_DxcUtils, IID_PPV_ARGS(&utils))))
	{
		return false;
	}
	if (FAILED(DxcCreateInstance(CLSID_DxcCompiler, IID_PPV_ARGS(&compiler)))) 
	{
		return false;
	}
	if (FAILED(utils->CreateDefaultIncludeHandler(&includeHandler))) 
	{
		return false;
	}

	// 2. HLSL íŒŒì¼ì„ ì½ì–´ì„œ ë©”ëª¨ë¦¬ì— ì ì¬ + 3. ì»´íŒŒì¼ìš© DxcBuffer ìƒì„±
	ComPtr<IDxcBlobEncoding> file = nullptr;
	utils->LoadFile(path.c_str(), nullptr, &file);
	DxcBuffer sourceBuffer;
	sourceBuffer.Ptr = file->GetBufferPointer();
	sourceBuffer.Size = file->GetBufferSize();
	sourceBuffer.Encoding = DXC_CP_UTF8; // Assume BOM says UTF8 or UTF16 or this is ANSI text.

	// 2. HLSL íŒŒì¼ì„ ì½ì–´ì„œ ë©”ëª¨ë¦¬ì— ì ì¬
	//std::ifstream file(path, std::ios::binary | std::ios::ate);
	//if (!file)
	//{
	//	return false;
	//}

	//std::streamsize size = file.tellg();
	//file.seekg(0, std::ios::beg);

	//std::vector<char> buffer(size);
	//if (!file.read(buffer.data(), size)) 
	//{
	//	return false;
	//}

	// 3. ì»´íŒŒì¼ìš© DxcBuffer ìƒì„±
	//DxcBuffer sourceBuffer{};
	//sourceBuffer.Ptr = buffer.data();
	//sourceBuffer.Size = static_cast<UINT32>(buffer.size());
	//sourceBuffer.Encoding = DXC_CP_UTF8;

	// 4. ì»´íŒŒì¼ ì˜µì…˜ ì„¤ì •
	std::vector<LPCWSTR> arguments;
	arguments.push_back(path.c_str());              // Shader file name
	arguments.push_back(L"-E"); 
	arguments.push_back(name.c_str());				      // Entry point
	arguments.push_back(L"-T"); 
	arguments.push_back(version.c_str());			      // Target (vs_6_6)
	arguments.push_back(L"-Zi");                    // Debug info
	arguments.push_back(L"-Qembed_debug");          // Embed debug info
	arguments.push_back(L"-Zpr");                   // Row-major
	arguments.push_back(L"-Od");                    // Disable optimizations (for dev)

	// 5. ì»´íŒŒì¼ ì‹¤í–‰
	ComPtr<IDxcResult> result;
	if (FAILED(compiler->Compile( &sourceBuffer, arguments.data(), static_cast<UINT32>(arguments.size()), includeHandler.Get(), IID_PPV_ARGS(&result)))) 
	{
		::MessageBoxA(nullptr, "Shader Create Failed !", nullptr, MB_OK);
		return false;
	}

	// 6. ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸
	ComPtr<IDxcBlobUtf16> dummyName;
	result->GetOutput(DXC_OUT_ERRORS, IID_PPV_ARGS(&mErrorBlobDxc), dummyName.GetAddressOf());
	if (mErrorBlobDxc && mErrorBlobDxc->GetStringLength() > 0)
	{
		OutputDebugStringA((char*)mErrorBlobDxc->GetStringPointer());
	}

	// 7. ìµœì¢… Shader Blob ê°€ì ¸ì˜¤ê¸°
	ComPtr<IDxcBlob> shaderBlob;
	result->GetOutput(DXC_OUT_OBJECT, IID_PPV_ARGS(&shaderBlob), dummyName.GetAddressOf());
	blob = shaderBlob;

	
	shaderByteCode = { blob->GetBufferPointer(), blob->GetBufferSize() };

	return true;
}

```

---

### Arguments

`arguments`ëŠ” **DXC(DX Shader Compiler)**ì— ë„˜ê¸¸ ì»¤ë§¨ë“œë¼ì¸ ì˜µì…˜ ë¦¬ìŠ¤íŠ¸ë¡œ, ë§ˆì¹˜ ì½˜ì†”ì—ì„œ `dxc.exe`ë¥¼ í˜¸ì¶œí•  ë•Œ ì‚¬ìš©í•˜ëŠ” ê²ƒê³¼ ë™ì¼í•œ ì—­í• 

| ì¸ì            | ì—­í•                        |
| --------------- | -------------------------- |
| `path.c_str()`  | ì†ŒìŠ¤ íŒŒì¼ ì´ë¦„ (ë””ë²„ê·¸ìš©)  |
| `-E`            | Entry Point ì§€ì •           |
| `-T`            | Target Profile (vs_6_6 ë“±) |
| `-Zi`           | ë””ë²„ê·¸ ì •ë³´ ìƒì„±           |
| `-Qembed_debug` | ë””ë²„ê·¸ ì •ë³´ ë‚´ì¥           |
| `-Zpr`          | í–‰ ìš°ì„  í–‰ë ¬               |
| `-Od`           | ìµœì í™” ë¹„í™œì„±í™” (ë””ë²„ê¹…ìš©) |

| í•­ëª©                       | í•„ìˆ˜ ì—¬ë¶€ | ì„¤ëª…                               |
| -------------------------- | --------- | ---------------------------------- |
| íŒŒì¼ ì´ë¦„ (`path.c_str()`) | âœ… ê¶Œì¥    | ë””ë²„ê¹… ê²½ë¡œ ë° ì˜¤ë¥˜ ë©”ì‹œì§€ì— í•„ìš”  |
| `-E` (entry point)         | âœ… í•„ìˆ˜    | ì—†ìœ¼ë©´ ì–´ë–¤ í•¨ìˆ˜ë¶€í„° ì‹œì‘í• ì§€ ëª¨ë¦„ |
| `-T` (target profile)      | âœ… í•„ìˆ˜    | ì–´ë–¤ íƒ€ì…/ë²„ì „ì˜ ì‰ì´ë”ì¸ì§€ ëª¨ë¦„   |
| `-Zi`, `-Od`, `-Zpr`       | âŒ ì„ íƒ    | ë””ë²„ê¹…/í–‰ë ¬ ë°©ì‹/ìµœì í™” ë“± ì„¤ì •ìš©  |

---

## Shader Model ë²„ì „ ë¹„êµí‘œ âœ…

| ë²„ì „    | ì»´íŒŒì¼ëŸ¬ | ì£¼ìš” ê¸°ëŠ¥                                                        | DXIL | DX12 ì—°ê³„ ê¸°ëŠ¥               |
| ------- | -------- | ---------------------------------------------------------------- | ---- | ---------------------------- |
| **5.1** | FXC      | SM 5.0ì—ì„œ ê°œì„ , 64-bit ì§€ì›                                     | âŒ    | ê¸°ë³¸ ì§€ì›                    |
| **6.0** | DXC      | DXIL ë„ì…, `wave` ëª…ë ¹ì–´ ì¼ë¶€ ë„ì…                               | âœ…    | DXIL ê¸°ë°˜ ë Œë”ë§ ì‹œì‘        |
| **6.1** | DXC      | `WaveOps`, `ViewID`, `barycentrics` ë„ì…                         | âœ…    | ë©€í‹°ë·° / Geometry í–¥ìƒ       |
| **6.2** | DXC      | `WaveMatch`, `WaveReduce`, `float16` íƒ€ì…                        | âœ…    | Half precision ì§€ì›          |
| **6.3** | DXC      | `SV_Barycentrics`, `bitfield`, `atomic64` ë“±                     | âœ…    | ì •ë°€ ì œì–´ ì—°ì‚°               |
| **6.4** | DXC      | `ResourceDescriptorHeap`, `SamplerFeedback` ì§€ì› ì‹œì‘            | âœ…    | DX12 Sampler Feedback API    |
| **6.5** | DXC      | `RayQuery`, `RelaxedPrecision`, 64-bit Atomics                   | âœ…    | DXR 1.1 ë“± ê³ ê¸‰ RT ê¸°ëŠ¥      |
| **6.6** | DXC      | `bindless resources`, `packed resources`, `DXIL validation ê°•í™”` | âœ…    | DX12 Ultimate ê¸°ëŠ¥ ì—°ë™ ì™„ì„± |

---

## ì£¼ìš” ê¸°ëŠ¥ ë³€í™” ìš”ì•½ ğŸ”

### SM 5.1 (FXC ê¸°ë°˜)

- DX12 ì´ˆê¸°ì™€ í˜¸í™˜ë˜ì§€ë§Œ, DXIL ë° ìµœì‹  ê¸°ëŠ¥ ë¶ˆê°€

### SM 6.0~6.2 (DXIL ë„ì…ê¸°)

- DXIL ì‚¬ìš© ì‹œì‘
- WaveOps, 16-bit ì—°ì‚° ì§€ì›
- DXC í•„ìˆ˜

### SM 6.3~6.4

- `SV_Barycentrics` ë“± ê³ ê¸‰ ì…°ì´ë”© ê¸°ë²•
- `Sampler Feedback` ë“±ì¥ (DX12 Ultimate ì¼ë¶€ ì‹œì‘)

### SM 6.5

- `RayQuery` ë“±ì¥ (DXR 1.1)
- Relaxed Precision, 64-bit atomic ë“± ê³ ì„±ëŠ¥ ì—°ì‚° ì§€ì›

### SM 6.6

- ìµœì‹  í•˜ë“œì›¨ì–´ íŠ¹í™” ê¸°ëŠ¥:
    - `bindless descriptor heap`
    - `packed resource`
    - ìµœì í™”ëœ Validation

---

## ì–´ë–¤ ë²„ì „ì„ ì„ íƒí•´ì•¼ í• ê¹Œ? ğŸ§ 

| ëª©í‘œ                 | ê¶Œì¥ Shader Model |
| -------------------- | ----------------- |
| êµ¬í˜• í•˜ë“œì›¨ì–´ í˜¸í™˜ì„± | SM 5.1            |
| ì¼ë°˜ì ì¸ DX12 ë Œë”ëŸ¬ | SM 6.2 ì´ìƒ       |
| WaveOps / ì •ë°€ ì—°ì‚°  | SM 6.3 ì´ìƒ       |
| Sampler Feedback, RT | **SM 6.4~6.6**    |
| DX12 Ultimate ëŒ€ì‘   | **SM 6.6 ê¶Œì¥**   |

---

## ì°¸ê³ 

### URL

[https://learn.microsoft.com/ko-kr/windows/win32/api/dxcapi/](https://learn.microsoft.com/ko-kr/windows/win32/api/dxcapi/)

[https://github.com/microsoft/DirectXShaderCompiler/wiki/Using-dxc.exe-and-dxcompiler.dll](https://github.com/microsoft/DirectXShaderCompiler/wiki/Using-dxc.exe-and-dxcompiler.dll)

### ìš©ì–´

| ìš©ì–´         | ì„¤ëª…                                                     |
| ------------ | -------------------------------------------------------- |
| DXIL         | DirectX Intermediate Language (SM 6.xë¶€í„° ë„ì…)          |
| DXC          | DXIL ì»´íŒŒì¼ëŸ¬ (`dxc.exe`, `IDxcCompiler3`)               |
| FXC          | êµ¬ë²„ì „ HLSL ì»´íŒŒì¼ëŸ¬ (`D3DCompileFromFile`)              |
| WaveOps      | SIMD ìˆ˜ì¤€ì—ì„œ Thread ê°„ í†µì‹  ëª…ë ¹ (e.g. `WaveActiveSum`) |
| Barycentrics | í”½ì…€ ì‰ì´ë”ì—ì„œ ë³´ê°„ ì •ë³´ ì§ì ‘ ì ‘ê·¼                      |

---

### **d3d12shader.h**

 `#include <d3d12shader.h>`ëŠ” **DirectX 12ì—ì„œ HLSL ì…°ì´ë”ì˜ ë©”íƒ€ë°ì´í„°(ë¦¬ì†ŒìŠ¤ ì •ë³´ ë“±)ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ë¶„ì„(reflection)** í•˜ê¸° ìœ„í•œ **ì…°ì´ë” ë¦¬í”Œë ‰ì…˜ API**ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ í—¤ë”

### ëª©ì : ì…°ì´ë” ë¦¬í”Œë ‰ì…˜ (Shader Reflection)

ì…°ì´ë” ì»´íŒŒì¼ ê²°ê³¼ë¬¼(`.cso` ë˜ëŠ” `DXIL`)ì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ **ì…°ì´ë”ì˜ êµ¬ì¡° ì •ë³´ë¥¼ ëŸ°íƒ€ì„ì— ì¶”ì¶œ**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- ë°”ì¸ë”©ëœ ìƒìˆ˜ ë²„í¼ (CBV)
- í…ìŠ¤ì²˜ (SRV/UAV)
- ì •ì  ì…ë ¥ ì‹œê·¸ë‹ˆì²˜
- ì¶œë ¥ ì‹œê·¸ë‹ˆì²˜
- ì“°ë ˆë“œ ê·¸ë£¹ ì •ë³´ (ì»´í“¨íŠ¸ ì…°ì´ë”)

### ì£¼ìš” ì¸í„°í˜ì´ìŠ¤

ì´ í—¤ë”ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ì¸í„°í˜ì´ìŠ¤ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

| ì¸í„°í˜ì´ìŠ¤                             | ì„¤ëª…                               |
| -------------------------------------- | ---------------------------------- |
| `ID3D12ShaderReflection`               | ì…°ì´ë” ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì „ë°˜ì ì¸ ì •ë³´ |
| `ID3D12ShaderReflectionConstantBuffer` | ìƒìˆ˜ ë²„í¼ ë‚´ë¶€ í•„ë“œ ì •ë³´           |
| `ID3D12ShaderReflectionVariable`       | ê°œë³„ ë³€ìˆ˜ ì •ë³´                     |
| `ID3D12ShaderReflectionType`           | ë³€ìˆ˜ íƒ€ì… ì •ë³´                     |

---

### ë¶„ì„ ê°€ëŠ¥í•œ ê²ƒë“¤ (ì •ì  ì •ë³´, ì»´íŒŒì¼ ê²°ê³¼ ê¸°ë°˜)

| í•­ëª©                                            | ì„¤ëª…                                      |
| ----------------------------------------------- | ----------------------------------------- |
| ì…°ì´ë”ì— ì„ ì–¸ëœ CBV/SRV/UAV                     | ì–´ë–¤ ì´ë¦„ìœ¼ë¡œ ëª‡ ë²ˆì§¸ ìŠ¬ë¡¯ì— ìˆëŠ”ì§€       |
| ì…°ì´ë” ìƒìˆ˜ ë²„í¼ êµ¬ì¡°ì²´ ë‚´ë¶€ ë³€ìˆ˜ ì´ë¦„ê³¼ ì˜¤í”„ì…‹ | íŒ¨ë”© í¬í•¨ ì—¬ë¶€ í™•ì¸ ê°€ëŠ¥                  |
| í…ìŠ¤ì²˜/ìƒ˜í”ŒëŸ¬ ë°”ì¸ë”© ê°œìˆ˜ì™€ íƒ€ì…                | ì˜ˆ: `Texture2D`, `SamplerState` ë“±        |
| ì…°ì´ë”ì˜ ì…ë ¥/ì¶œë ¥ ì‹œê·¸ë‹ˆì²˜                     | ì •ì  ì…°ì´ë”ì˜ ì…ë ¥, í”½ì…€ ì…°ì´ë”ì˜ ì¶œë ¥ ë“± |
| ì“°ë ˆë“œ ê·¸ë£¹ í¬ê¸° (ì»´í“¨íŠ¸ ì…°ì´ë”)                | `[numthreads(x, y, z)]` ì •ë³´              |

### ë¶„ì„ ë¶ˆê°€ëŠ¥í•œ ê²ƒë“¤ (ëŸ°íƒ€ì„ GPU ìƒíƒœ)

| í•­ëª©                      | ì„¤ëª…                                             |
| ------------------------- | ------------------------------------------------ |
| í˜„ì¬ GPU ì‚¬ìš©ëŸ‰           | GPU ì ìœ ìœ¨, VRAM ì‚¬ìš©ëŸ‰, ëŒ€ê¸°ì—´ ìƒíƒœ ë“±          |
| ì‹¤ì‹œê°„ íŒŒì´í”„ë¼ì¸ ìƒíƒœ    | í˜„ì¬ ì–´ë–¤ ì…°ì´ë”ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€, GPU idle ì—¬ë¶€ ë“± |
| ë°”ì¸ë”©ëœ ë¦¬ì†ŒìŠ¤ì˜ ì‹¤ì œ ê°’ | ì˜ˆ: GPUì— ì˜¬ë¼ê°„ CBVì— ì–´ë–¤ ê°’ì´ ìˆëŠ”ì§€          |
| GPU ìŠ¤ë ˆë“œ ì‹¤í–‰ íë¦„      | Wave ìƒíƒœ, SIMD ìƒíƒœ, occupancy ë“±               |

ì´ëŸ° ì •ë³´ë“¤ì€ **Shader Reflection APIë¡œëŠ” ë¶ˆê°€ëŠ¥**í•˜ë©°, **GPU ë””ë²„ê±°/ë¶„ì„ê¸°** ë˜ëŠ” **D3D12ì˜ low-level ë””ë²„ê¹…/ì¿¼ë¦¬ API**ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

### GPU ìƒíƒœë¥¼ ì‹¤ì‹œê°„ ë¶„ì„í•˜ë ¤ë©´?

| ë„êµ¬/ê¸°ìˆ                       | ì„¤ëª…                                                                       |
| ------------------------------ | -------------------------------------------------------------------------- |
| **PIX for Windows**            | GPU ëª…ë ¹ ë¶„ì„, GPU íƒ€ì´ë°, ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¶”ì                               |
| **NVIDIA Nsight Graphics**     | NVIDIA GPUì— ìµœì í™”ëœ ëŸ°íƒ€ì„ ë¶„ì„ ë° ì…°ì´ë” ë””ë²„ê¹…                         |
| **AMD Radeon GPU Profiler**    | AMD GPU íƒ€ê²Ÿ ë¶„ì„ ë„êµ¬                                                     |
| **D3D12 Query Heap**           | GPU íƒ€ì´ë°/ì˜¤ë²„í—¤ë“œ/ì˜¤ì¿¼ë¦¬ í†µê³„ ìˆ˜ì§‘ìš©                                     |
| **D3D12 Performance Counters** | ë””ë°”ì´ìŠ¤/ë“œë¼ì´ë²„ì— ë”°ë¼ GPU ë‚´ë¶€ ìƒíƒœ ì¸¡ì • ê°€ëŠ¥ (ë²¤ë” ì „ìš© API í¬í•¨ ê°€ëŠ¥) |

---
