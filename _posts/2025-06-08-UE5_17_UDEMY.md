---
title: UE5 C++ | Crypt Raider, Grabber êµ¬í˜„ (ìœ ë°ë¯¸)
date: 2025-06-08 16:43:20 +0900
categories: [Study, Study\Unreal]
tags: [UE5, ê°•ì˜ì •ë¦¬, ue5-developer, udemy]
author: "rniman"                            # for single entry
# or
# authors: [<author1_id>, <author2_id>]   # for multiple entries
description: "ì–¸ë¦¬ì–¼ ê°•ì˜ ì¤‘ Section 4ë¥¼ ì •ë¦¬í•œ ì—¬ì„¯ë²ˆì§¸ ê¸€ì…ë‹ˆë‹¤."

comments: false # ëŒ“ê¸€ ê¸°ëŠ¥
---

## ê°•ì˜ ì •ë³´ ğŸ“
- ê°•ì˜ëª…: [Unreal Engine 5 C++ Developer: Learn C++ & Make Video Games](https://www.udemy.com/course/unrealcourse-korean/?couponCode=CP130525)
- í”Œë«í¼: ìœ ë°ë¯¸
- í˜„ì¬ ì„¹ì…˜: Section 4 - Crypt Raider
- ì£¼ìš” ë‚´ìš©: PhysicsHandleì„ í™œìš©í•´ì„œ Grabberë¥¼ êµ¬í˜„í•˜ì˜€ë‹¤.

---

## FindComponentByClass() & nullptr ğŸ”

ì»´í¬ë„ŒíŠ¸ ë‚´ì—ì„œ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ì—°ê²°í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³¸ë‹¤.

### PhysicsHandle ì»´í¬ë„ŒíŠ¸ ì—°ê²°

- **PhysicsHandle** ì»´í¬ë„ŒíŠ¸ë¥¼ `BP_Player`ì— ì¶”ê°€í•œë‹¤.
- ì¡ì•„ì•¼ í•  ê°ì²´ë¥¼ ì§€ì •í•˜ê³  ì¡ì€ ê°ì²´ì˜ ë†“ì„ ìœ„ì¹˜ë¥¼ ì•Œë ¤ì£¼ëŠ” ì—­í• ì„ í•´ì•¼ í•œë‹¤.
- Grab ì‹œ ì‚¬ìš©í•  PhysicsHandle ì»´í¬ë„ŒíŠ¸ë¥¼ ì°¾ëŠ” ë°©ë²•:
    
    ```cpp
    #include "PhysicsEngine/PhysicsHandleComponent.h"
    
    ...
    
    void UGrabber::BeginPlay(){
    	...
    	// FindComponentByClassëŠ” í…œí”Œë¦¿ í•¨ìˆ˜
    	UPhysicsHandleComponent* PhysicsHandle = GetOwner()->FindComponentByClass<UPhysicsHandleComponent>(); // í…œí”Œë¦¿ í•¨ìˆ˜
    	if(PhysicsHandle)
    	{
    		UE_LOG(LogTemp, Display, TEXT("Got Physics Handle: %s"), *PhysicsHandle->GetName());
    	}
    	else
    	{
    		UE_LOG(LogTemp, Warning, TEXT("No Physics Handle Found!"));		
    	}
    }
    // VS Codeì—ì„œ ë¹Œë“œë¥¼ í•œ í›„ í”„ë¡œì íŠ¸ë¥¼ ì—´ì–´ì¤€ë‹¤.
    ```
    

---

## DrawDebugSphere() ğŸ¨

ë””ë²„ê·¸ êµ¬ì²´ë¥¼ ê·¸ë ¤ë³¸ë‹¤.

- Grab ì‹œ **ë””ë²„ê·¸ìš© êµ¬ì²´** ì‹œê°í™”ê°€ ê°€ëŠ¥í•˜ë‹¤.

```cpp
void UGrabber::Grab(){	
	...
	DrawDebugSphere(GetWorld(), End, 10.0f, 10, FColor::Blue, false, 5.0f);
	...
	if(HasHit)
	{
		DrawDebugSphere(GetWorld(), HitResult.Location,...); // ì´ˆë¡ìƒ‰ êµ¬
		DrawDebugSphere(GetWorld(), HitResult.ImpactPoint,...); // ë³´ë¼ìƒ‰ êµ¬
		...
	}
```

![**ì´ˆë¡ìƒ‰** â†’ Location, **ë³´ë¼ìƒ‰** â†’ ImpactPoint, **íŒŒë€ìƒ‰** â†’ End](assets/img/UE5/01_UDEMY/Debug Sphere.png)
_**ì´ˆë¡ìƒ‰** â†’ Location, **ë³´ë¼ìƒ‰** â†’ ImpactPoint, **íŒŒë€ìƒ‰** â†’ End_

---

## PhysicsHandleë¡œ ê°ì²´ ì¡ê¸° ğŸ–ï¸

- ì•¡í„°ì˜ í”¼ì§ìŠ¤ ì‹œë®¬ë ˆì´í„°ë¥¼ í‚¤ê³  Mobilityë¥¼ Movable ìƒíƒœë¡œ ë°”ê¿”ì¤€ë‹¤.

### TickComponent ë‚´ë¶€ êµ¬í˜„

```cpp
void UGrabber::TickComponent(...){
	...

	UPhysicsHandleComponent* PhysicsHandle = GetOwner()->FindComponentByClass<UPhysicsHandleComponent>();
	if(!PhysicsHandle)
	{
		return;
	}
	FVector TargetLocation = GetComponentLocation() + GetForwardVector() * HoldDistance;
	PhysicsHandle->SetTargetLocationAndRotation(TargetLocation, GetComponentRotation());
}
```

### Grab í•¨ìˆ˜

```cpp
void UGrabber::Grab(){
	UPhysicsHandleComponent* PhysicsHandle = GetOwner()->FindComponentByClass<UPhysicsHandleComponent>();
	if(!PhysicsHandle)
	{
		return;
	}
	...
	if(HasHit)
	{
		PhysicsHandle->GrabComponentAtLocationWithRotation(
			HitResult.GetComponent(),
			NAME_None,
			HitResult.ImpactPoint,
			GetComponentRotation()
		);
	}
}
```

---

## ë¬¼ë¦¬ ì˜¤ë¸Œì íŠ¸ ê¹¨ìš°ê¸° ğŸ’¤

- ë¬¼ë¦¬ ì‹œë®¬ë ˆì´í„°ë¥¼ ë‹´ë‹¹í•˜ëŠ” `UPrimitiveComponent` ê°€ ì¼ì •ì‹œê°„ì´ ì§€ë‚˜ë©´ ìŠ¬ë¦½ ëª¨ë“œë¡œ ë“¤ì–´ê°€ëŠ” ê²ƒì„ ë°©ì§€í•´ì•¼í•œë‹¤.
- ìŠ¬ë¦½ ëª¨ë“œ ë°©ì§€:
    
    ```cpp
    ..
    	if(HasHit)	{
    		UPrimitiveComponent* HitComponent = HitResult.GetComponent();
    		HitComponent->WakeAllRigidBodies();
    		...
    	}
    ```
    

### Release í•¨ìˆ˜

```cpp
void UGrabber::Release(){
	UPhysicsHandleComponent* PhysicsHandle = GetPhysicsHandle();
	if(!PhysicsHandle)
	{
		return;
	}
	
	UPrimitiveComponent* HitComponent = PhysicsHandle->GetGrabbedComponent();
	if(HitComponent)
	{
		HitComponent->WakeAllRigidBodies();
		PhysicsHandle->ReleaseComponent();	
	}
}
```

### ë¬¼ë¦¬ ì¶©ëŒ í•´ê²°

- ê°€ê³ ì¼ ì„ìƒì„ ì„ íƒ í›„ All â†’ Collision â†’ Collision Presets â†’ Pawnì„ Overlapìœ¼ë¡œ ì„¤ì •í•œë‹¤.
- Dirt_Moundì˜ ê²½ìš° Collision Presetì„ NoCollisionìœ¼ë¡œ ì„¤ì •í•´ì¤€ë‹¤.

![Grab ì¥ë©´](assets/img/UE5/01_UDEMY/Grab Result.png)
_Grab ì¥ë©´_

---

## ì•„ì›ƒ íŒŒë¼ë¯¸í„° ë¦¬í„´ â†©ï¸

### Grab í•¨ìˆ˜ ë¦¬íŒ©í† ë§

```cpp
void UGrabber::Grab()
{
	...

	FHitResult HitResult;
	bool HasHit = GetGrabbableInReach(HitResult);
	
	...
}

bool UGrabber::GetGrabbableInReach(FHitResult& OutHitResult) const
{
	FVector Start = GetComponentLocation();
	FVector End = Start + GetForwardVector() * MaxGrabDistance;
	DrawDebugLine(GetWorld(), Start, End, FColor::Red, false);
	DrawDebugSphere(GetWorld(), End, 10.0f, 10, FColor::Blue, false, 5.0f);

	FCollisionShape Sphere = FCollisionShape::MakeSphere(GrabRadius);
	bool HasHit = GetWorld()->SweepSingleByChannel(
		OutHitResult, 
		Start, 
		End, 
		FQuat::Identity, 
		ECC_GameTraceChannel2,
		Sphere
	);

	return HasHit;
}
```

## ìš”ì•½ ë° ëŠë‚€ì  ğŸ“

- PhysicsHandle í™œìš©ë²•ì„ ë‹¤ë£¨ê³  ë””ë²„ê·¸ êµ¬ì²´ë¥¼ ë„ì›Œë³´ì•˜ë‹¤.
- Grab/Release ê¸°ëŠ¥ êµ¬ì„±í•˜ê³  ê°„ë‹¨í•œ ì•„ì›ƒ íŒŒë¼ë¯¸í„° ê¸°ë°˜ ë¦¬íŒ©í† ë§ì„ ì ìš©í•˜ì˜€ë‹¤.
> C++ì„ í™œìš©í•œ ì²« ê¸°ëŠ¥ì„ êµ¬í˜„í•´ë³¸ ëŠë‚Œì´ë‹¤. ì§€ê¸ˆì€ ë‹¨ìˆœíˆ ë“¤ê³  ë†“ëŠ” ìƒíƒœì¸ë° ë“¤ê³ ìˆëŠ” ìƒíƒœì—ì„œ ì˜¤ë¸Œì íŠ¸ë¥¼ íšŒì „ì‹œí‚¨ë‹¤ë˜ì§€ ì´ë™ì‹œí‚¤ëŠ” ë“±ì˜ ë™ì‘ì„ ì¶”ê°€ë¡œ êµ¬í˜„í•´ë³´ê³ ì‹¶ë‹¤.
